{"ast":null,"code":"import _slicedToArray from \"/Users/annanaz/dev/movies-explorer-frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/annanaz/dev/movies-explorer-frontend/src/components/Movies/Movies.js\";\nimport React from 'react';\nimport './Movies.css';\nimport Header from '../Header/Header';\nimport SearchForm from '../SearchForm/SearchForm';\nimport Preloader from '../Preloader/Preloader';\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\nimport Footer from '../Footer/Footer';\nimport { moviesApi } from '../../utils/MoviesApi';\nfunction Movies() {\n  var _React$useState = React.useState([]),\n    _React$useState2 = _slicedToArray(_React$useState, 2),\n    cardList = _React$useState2[0],\n    setCardList = _React$useState2[1];\n  var _React$useState3 = React.useState(false),\n    _React$useState4 = _slicedToArray(_React$useState3, 2),\n    loading = _React$useState4[0],\n    setLoading = _React$useState4[1];\n  var _React$useState5 = React.useState(''),\n    _React$useState6 = _slicedToArray(_React$useState5, 2),\n    query = _React$useState6[0],\n    setQuery = _React$useState6[1];\n  var _React$useState7 = React.useState(false),\n    _React$useState8 = _slicedToArray(_React$useState7, 2),\n    shortOnly = _React$useState8[0],\n    setShortOnly = _React$useState8[1];\n  var _React$useState9 = React.useState(false),\n    _React$useState10 = _slicedToArray(_React$useState9, 2),\n    error = _React$useState10[0],\n    setError = _React$useState10[1];\n  var loadFromStorage = function loadFromStorage() {\n    var movies = localStorage.getItem(\"movies\");\n    if (movies) {\n      var moviesData = JSON.parse(movies);\n      setQuery(moviesData.query);\n      setCardList(moviesData.cardList);\n      setShortOnly(moviesData.shortOnly);\n    }\n  };\n  var saveToStorage = function saveToStorage(newQuery, newCardList, newShortOnly) {\n    var moviesData = {\n      query: newQuery,\n      cardList: newCardList,\n      shortOnly: newShortOnly\n    };\n    localStorage.setItem(\"movies\", JSON.stringify(moviesData));\n  };\n  React.useEffect(function () {\n    loadFromStorage();\n  }, []);\n  var handleSearchSubmit = function handleSearchSubmit(q, short) {\n    setLoading(true);\n    moviesApi.movies().then(function (result) {\n      var queryLowerCase = q.toLowerCase();\n      // фильтруем фильмы по запросу\n      result = result.filter(function (movie) {\n        var condition = movie.nameRU.toLowerCase().includes(queryLowerCase) || movie.nameEN.toLowerCase().includes(queryLowerCase);\n        if (!short) {\n          return condition;\n        }\n        return condition && movie.duration <= 40;\n      });\n      setLoading(false);\n      setCardList(result);\n      saveToStorage(q, result, short);\n    }).catch(function (err) {\n      setLoading(false);\n      setError(true);\n      console.log(err);\n    });\n  };\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    loggedIn: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"main\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SearchForm, {\n    query: query,\n    onQueryChange: setQuery,\n    onShortOnlyChange: function onShortOnlyChange() {\n      setShortOnly(!shortOnly);\n      handleSearchSubmit(query, !shortOnly);\n    },\n    shortOnly: shortOnly,\n    onSubmit: function onSubmit() {\n      return handleSearchSubmit(query, shortOnly);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 17\n    }\n  }), loading ? /*#__PURE__*/React.createElement(Preloader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 21\n    }\n  }) : /*#__PURE__*/React.createElement(MoviesCardList, {\n    cards: cardList,\n    error: error,\n    isFavourites: false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 37\n    }\n  })), /*#__PURE__*/React.createElement(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }\n  }));\n}\nexport default Movies;","map":{"version":3,"names":["React","Header","SearchForm","Preloader","MoviesCardList","Footer","moviesApi","Movies","_React$useState","useState","_React$useState2","_slicedToArray","cardList","setCardList","_React$useState3","_React$useState4","loading","setLoading","_React$useState5","_React$useState6","query","setQuery","_React$useState7","_React$useState8","shortOnly","setShortOnly","_React$useState9","_React$useState10","error","setError","loadFromStorage","movies","localStorage","getItem","moviesData","JSON","parse","saveToStorage","newQuery","newCardList","newShortOnly","setItem","stringify","useEffect","handleSearchSubmit","q","short","then","result","queryLowerCase","toLowerCase","filter","movie","condition","nameRU","includes","nameEN","duration","catch","err","console","log","createElement","Fragment","loggedIn","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onQueryChange","onShortOnlyChange","onSubmit","cards","isFavourites"],"sources":["/Users/annanaz/dev/movies-explorer-frontend/src/components/Movies/Movies.js"],"sourcesContent":["import React from 'react';\r\nimport './Movies.css';\r\nimport Header from '../Header/Header';\r\nimport SearchForm from '../SearchForm/SearchForm';\r\nimport Preloader from '../Preloader/Preloader';\r\nimport MoviesCardList from '../MoviesCardList/MoviesCardList';\r\nimport Footer from '../Footer/Footer';\r\nimport { moviesApi } from '../../utils/MoviesApi';\r\n\r\n\r\nfunction Movies() {\r\n    const [cardList, setCardList] = React.useState([]);\r\n    const [loading, setLoading] = React.useState(false);\r\n    const [query, setQuery] = React.useState('');\r\n    const [shortOnly, setShortOnly] = React.useState(false);\r\n    const [error, setError] = React.useState(false);\r\n\r\n    const loadFromStorage = () => {\r\n        const movies = localStorage.getItem(\"movies\");\r\n        if (movies) {\r\n            const moviesData = JSON.parse(movies);\r\n            setQuery(moviesData.query);\r\n            setCardList(moviesData.cardList);\r\n            setShortOnly(moviesData.shortOnly);\r\n        }\r\n    }\r\n\r\n    const saveToStorage = (newQuery, newCardList, newShortOnly) => {\r\n        const moviesData = {\r\n            query: newQuery,\r\n            cardList: newCardList,\r\n            shortOnly: newShortOnly,\r\n        }\r\n        localStorage.setItem(\"movies\",\r\n            JSON.stringify(moviesData));\r\n    }\r\n\r\n    React.useEffect(() => {\r\n        loadFromStorage();\r\n    }, []);\r\n\r\n    const handleSearchSubmit = (q, short) => {\r\n        setLoading(true);\r\n        moviesApi.movies()\r\n            .then((result) => {\r\n                const queryLowerCase = q.toLowerCase();\r\n                // фильтруем фильмы по запросу\r\n                result = result.filter(movie => {\r\n                    const condition =\r\n                        movie.nameRU.toLowerCase().includes(queryLowerCase) ||\r\n                        movie.nameEN.toLowerCase().includes(queryLowerCase);\r\n                    if (!short) {\r\n                        return condition;\r\n                    }\r\n                    return condition && movie.duration <= 40\r\n                });\r\n                setLoading(false);\r\n                setCardList(result);\r\n                saveToStorage(q, result, short);\r\n            })\r\n            .catch((err) => {\r\n                setLoading(false);\r\n                setError(true);\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Header loggedIn={true} />\r\n            <main>\r\n                <SearchForm\r\n                    query={query}\r\n                    onQueryChange={setQuery}\r\n                    onShortOnlyChange={() => { setShortOnly(!shortOnly); handleSearchSubmit(query, !shortOnly) }}\r\n                    shortOnly={shortOnly}\r\n                    onSubmit={() => handleSearchSubmit(query, shortOnly)} />\r\n                {loading ?\r\n                    <Preloader /> : <MoviesCardList cards={cardList} error={error} isFavourites={false} />\r\n                }\r\n            </main>\r\n            <Footer />\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Movies;"],"mappings":"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"},"metadata":{},"sourceType":"module"}